# 벌크 데이터

대아토 CRUD 동작을 통해 하나하나 도큐먼트를 요청하는 것보다는 벌크로 한번에 요청하는 것이 효율적이다.   
엘라스틱서치는 벌크 API를 지원하는데, REST API 콜 수를 줄여 성능을 높인다.      

```
POST _bulk
{ "index" : {"_index" : "test", "_id" : "1"}}
{"field1": "value1"}
{"create": {"_index": "test", "_id": "3"}}
{"field1" : "value3"}
{"update": {"_id": "1", "_index": "test"}}
{"doc" : {"field2":"value2"}}
{"delete": {"_index": "test", "_id": "2"}}
```
  
bulk API는 도큐먼트 읽기는 지원하지 않고, 도큐먼트 생성/수정/삭제만 지원한다.       
벌크 데이터 포맷을 보면 삭제(delete)만 한줄로 작성하고 나머지(index, create, update)는 두줄로 작성된다.    
각 줄 사이에는 쉼표 등 별도의 구분자가 없고 라인 사이 공백을 허용하지 않는다.     

JSON 같지만, 복수의 JSON 구조를 줄바꿈 문자열로 구분하는 NDJSON 형태다.    

