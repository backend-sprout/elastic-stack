# 파이프라인

로그스태시의 가장 중요한 부분은 파이프라인이다.  
파이프라인은 데이터를 입력받아 실시간으로 변경하고 이를 다른 시스템에 전달하는 역할을 한다.   

파이프라인은 `입력`, `필터`, `출력`, 3단계로 나뉘어진다.   
* 입력 : 소스로부터 데이터를 받아들이는 모듈
* 필터 : 입력으로 들어오는 데이터를 원하는 형태로 가공하는 모듈 
* 출력 : 데이터를 외부로 전달하는 모듈 

```
/bin/logstash -e "input { stdin{} } output { stdout } }"
> hello world!

"@version" => "1",
"host" => "컴퓨터 HOST"
"message" => "hello world\r"
"@timestamp" => 2021-12-24T22:24:40.352Z
```
console I/O 기반의 로그 스태시를 실행하고 명령어를 입력하면 위와 같은 결과가 출력된다. 
  
로그스태시는 JSON 형태로 데이터를 출력하는데,     
@version 이나 @timestamp 는 로그 스태시가 만든 필드로   
사용자가 만든 필드와 충돌이 날 것을 대비해 앞에 @ 기호가 붙어있다.  
 
`@` 기호는 로그스태시에 의해 생성된 필드,  
붙지않은 필드는 수집을 통해 얻어진 정보라고 이해하자.   

```
input {
    { 입력 플러그인 } 
}

filter {
    { 필터 플러그인 }
}

output {
    { 출력 플러그인 }
}
```
파이프라인을 구성하는 기본 템플릿은 위와 같다.    
용도나 형태에 따라 이미 만들어진 다양한 플러그인이 있기 때문에     
필요한 기능을 지원하는 플러그인을 검색하여 템플릿에 추가하면 된다.    

## 입력 

소스 원본으로부터 데이터를 입력받는 단계다.   
직접 대상에 접근해 읽어들이는 경우도 있지만, 서버를 열어놓고 받아들이는 형태의 구성도 가능하다.   

[이미지](이미지)

로그 스태시는 다양한 형태의 데이털르 인식할 수 있고, 이를 쉽게 처리하기 위해 다양한 입력 플러그인들이 존재한다.   
 
